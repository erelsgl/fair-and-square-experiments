!function t(n,r,e){function i(u,a){if(!r[u]){if(!n[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+u+"'")}var c=r[u]={exports:{}};n[u][0].call(c.exports,function(t){var r=n[u][1][t];return i(r?r:t)},c,c.exports,t,n,r,e)}return r[u].exports}for(var o="function"==typeof require&&require,u=0;u<e.length;u++)i(e[u]);return i}({1:[function(t,n,r){var e=t("munkres-js"),i=t("underscore");i.mixin(t("argminmax"));var o=n.exports=function(){this.munkres=new e.Munkres};if(o.verifyBids=function(t,n){for(var r=t.length,e=0;e<t.length;++e){var i=t[e];if(i.length!=r)throw new Error("Agent "+e+" has invalid number of bids: there are "+i.length+" bids but the total number of items is "+r);if(sum=i.reduce(function(t,n){return t+n},0),sum<n)throw new Error("The bids of agent "+e+" are too low! the sum is "+sum+" but should be at least "+n)}},o.prototype.compute=function(t,n){n||(n=0),o.verifyBids(t,n),this.bids=t,this.itemCount=t.length,this.allocation=this.munkres.compute(e.make_cost_matrix(t)),this._calculatePaymentsFromBids(),this.totalPayment-=n;for(var r=1;r<this.itemCount&&(this._calculateNetValues(),this._calculateEnvy(),this.hasEnvy);++r)this._compensateEnviousAgents();if(this.hasEnvy)throw console.dir(this.envies),new Error("Envy detected!");if(this.totalPayment<0)throw new Error("Deficit! Total payment after compensations = "+this.totalPayment);return this._divideSurplusEqually(this.totalPayment),this.allocation.forEach(function(t,n){t.push(this.paymentByAgent[n])},this),this.allocation},o.prototype._calculatePaymentsFromBids=function(){this.paymentByAgent=Array(this.itemCount),this.paymentByItem=Array(this.itemCount),this.totalPayment=0,this.allocation.forEach(function(t){var n=t[0],r=t[1],e=this.bids[n][r];this.totalPayment+=e,this.paymentByAgent[n]=e,this.paymentByItem[r]=e},this)},o.prototype._calculateNetValues=function(){this.netValues=this.bids.map(function(t){return t.map(function(t,n){return t-this.paymentByItem[n]},this)},this)},o.prototype._calculateEnvy=function(){this.hasEnvy=!1,this.envies=this.netValues.map(function(t,n){for(var r=this.allocation[n][1],e=t[r],o=Array(this.itemCount),u=0;u<this.itemCount;++u){var a=this.allocation[u][1],s=t[a];o[u]=s-e}var c=i.argmax(o),f=o[c];return f>0&&(this.hasEnvy=!0),{envies:o,mostEnviedAgent:c,maxEnvy:o[c]}},this)},o.prototype._compensateEnviousAgents=function(){for(var t=0;t<this.itemCount;++t){var n=this.envies[t];if(!(n.maxEnvy<=0||this.envies[n.mostEnviedAgent].maxEnvy>0)){var r=n.maxEnvy,e=this.allocation[t][1];this.paymentByItem[e]-=r,this.paymentByAgent[t]-=r,this.totalPayment-=r}}},o.prototype._divideSurplusEqually=function(t){for(var n=Math.floor(t/this.itemCount),r=0;r<this.itemCount;++r){var e=this.allocation[r][1];this.paymentByItem[e]-=n,this.paymentByAgent[r]-=n,this.totalPayment-=n}},"undefined"!=typeof t&&"undefined"!=typeof n&&t.main==n){var u=new o,a=[[20,-10,-10],[10,0,-10],[0,10,-10]];console.log("bids: "),console.dir(a);var s=u.compute(a,0);console.log("allocation: "),console.dir(s)}},{argminmax:3,"munkres-js":4,underscore:5}],2:[function(t,n,r){window.CompensationProcedure=t("./compensation")},{"./compensation":1}],3:[function(t,n,r){var e=t("underscore"),i=function(t,n,r){if(!n)return t;switch(null==r?3:r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)};case 4:return function(r,e,i,o){return t.call(n,r,e,i,o)}}return function(){return t.apply(this,arguments)}},o=function(t,n,r){return null==t?e.identity:e.isFunction(t)?i(t,n,r):e.isObject(t)?e.matches(t):e.property(t)};n.exports={argmin:function(t,n,r){var e,i=null,u=null;n&&(n=o(n,r));for(var a=0,s=t.length;s>a;a++)e=n?n(t[a]):t[a],(null==i||i>e)&&(i=e,u=a);return u},argmax:function(t,n,r){var e,i=null,u=null;n&&(n=o(n,r));for(var a=0,s=t.length;s>a;a++)e=n?n(t[a]):t[a],(null==i||e>i)&&(i=e,u=a);return u}}},{underscore:5}],4:[function(t,n,r){"use strict";function e(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}function i(t,n){if(!n){for(var r=-1/0,e=0;e<t.length;++e)for(var i=0;i<t[e].length;++i)t[e][i]>r&&(r=t[e][i]);n=function(t){return r-t}}for(var o=[],e=0;e<t.length;++e){var u=t[e];o[e]=[];for(var i=0;i<u.length;++i)o[e][i]=n(t[e][i])}return o}function o(t){for(var n=[],r=0;r<t.length;++r)for(var e=0;e<t[r].length;++e){var i=String(t[r][e]).length;(!n[e]||i>=n[e])&&(n[e]=i)}for(var o="",r=0;r<t.length;++r){for(var e=0;e<t[r].length;++e){for(var u=String(t[r][e]);u.length<n[e];)u=" "+u;o+=u,e!=t[r].length-1&&(o+=" ")}r!=t[r].length-1&&(o+="\n")}return o}var u=parseInt(Number.MAX_SAFE_INTEGER/2)||(1<<26)*(1<<26),a=0;if(e.prototype.pad_matrix=function(t,n){n=n||a;for(var r=0,e=t.length,i=0;e>i;++i)t[i].length>r&&(r=t[i].length);e=r>e?r:e;for(var o=[],i=0;e>i;++i){for(var u=t[i]||[],s=u.slice();e>s.length;)s.push(n);o.push(s)}return o},e.prototype.compute=function(t,n){n=n||{},n.padValue=n.padValue||a,this.C=this.pad_matrix(t,n.padValue),this.n=this.C.length,this.original_length=t.length,this.original_width=t[0].length;for(var r=[];r.length<this.n;)r.push(!1);this.row_covered=r.slice(),this.col_covered=r.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(2*this.n,0),this.marked=this.__make_matrix(this.n,0);for(var e=1,i={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var o=i[e];if(!o)break;e=o.apply(this)}for(var u=[],s=0;s<this.original_length;++s)for(var c=0;c<this.original_width;++c)1==this.marked[s][c]&&u.push([s,c]);return u},e.prototype.__make_matrix=function(t,n){for(var r=[],e=0;t>e;++e){r[e]=[];for(var i=0;t>i;++i)r[e][i]=n}return r},e.prototype.__step1=function(){for(var t=0;t<this.n;++t)for(var n=Math.min.apply(Math,this.C[t]),r=0;r<this.n;++r)this.C[t][r]-=n;return 2},e.prototype.__step2=function(){for(var t=0;t<this.n;++t)for(var n=0;n<this.n;++n)0!=this.C[t][n]||this.col_covered[n]||this.row_covered[t]||(this.marked[t][n]=1,this.col_covered[n]=!0,this.row_covered[t]=!0);return this.__clear_covers(),3},e.prototype.__step3=function(){for(var t=0,n=0;n<this.n;++n)for(var r=0;r<this.n;++r)1==this.marked[n][r]&&(this.col_covered[r]=!0,++t);return t>=this.n?7:4},e.prototype.__step4=function(){for(var t=!1,n=-1,r=-1,e=-1;!t;){var i=this.__find_a_zero();if(n=i[0],r=i[1],0>n)return 6;if(this.marked[n][r]=2,e=this.__find_star_in_row(n),!(e>=0))return this.Z0_r=n,this.Z0_c=r,5;r=e,this.row_covered[n]=!0,this.col_covered[r]=!1}},e.prototype.__step5=function(){var t=0;this.path[t][0]=this.Z0_r,this.path[t][1]=this.Z0_c;for(var n=!1;!n;){var r=this.__find_star_in_col(this.path[t][1]);if(r>=0?(t++,this.path[t][0]=r,this.path[t][1]=this.path[t-1][1]):n=!0,!n){var e=this.__find_prime_in_row(this.path[t][0]);t++,this.path[t][0]=this.path[t-1][0],this.path[t][1]=e}}return this.__convert_path(this.path,t),this.__clear_covers(),this.__erase_primes(),3},e.prototype.__step6=function(){for(var t=this.__find_smallest(),n=0;n<this.n;++n)for(var r=0;r<this.n;++r)this.row_covered[n]&&(this.C[n][r]+=t),this.col_covered[r]||(this.C[n][r]-=t);return 4},e.prototype.__find_smallest=function(){for(var t=u,n=0;n<this.n;++n)for(var r=0;r<this.n;++r)this.row_covered[n]||this.col_covered[r]||t>this.C[n][r]&&(t=this.C[n][r]);return t},e.prototype.__find_a_zero=function(){for(var t=0;t<this.n;++t)for(var n=0;n<this.n;++n)if(0==this.C[t][n]&&!this.row_covered[t]&&!this.col_covered[n])return[t,n];return[-1,-1]},e.prototype.__find_star_in_row=function(t){for(var n=0;n<this.n;++n)if(1==this.marked[t][n])return n;return-1},e.prototype.__find_star_in_col=function(t){for(var n=0;n<this.n;++n)if(1==this.marked[n][t])return n;return-1},e.prototype.__find_prime_in_row=function(t){for(var n=0;n<this.n;++n)if(2==this.marked[t][n])return n;return-1},e.prototype.__convert_path=function(t,n){for(var r=0;n>=r;++r)this.marked[t[r][0]][t[r][1]]=1==this.marked[t[r][0]][t[r][1]]?0:1},e.prototype.__clear_covers=function(){for(var t=0;t<this.n;++t)this.row_covered[t]=!1,this.col_covered[t]=!1},e.prototype.__erase_primes=function(){for(var t=0;t<this.n;++t)for(var n=0;n<this.n;++n)2==this.marked[t][n]&&(this.marked[t][n]=0)},"undefined"!=typeof r&&r&&(r.version="1.1.0",r.format_matrix=o,r.make_cost_matrix=i,r.Munkres=e),"undefined"!=typeof t&&"undefined"!=typeof n&&t.main==n)for(var s=t("assert"),c=[[[[400,150,400],[400,450,600],[300,225,300]],850],[[[400,150,400,1],[400,450,600,2],[300,225,300,3]],452],[[[10,10,8],[9,8,1],[9,7,4]],18],[[[10,10,8,11],[9,8,1,1],[9,7,4,10]],15],[[[0,0,0],[0,0,0],[0,0,0]],0]],f=new e,l=0;l<c.length;++l){var p=c[l][0],h=c[l][1];console.log("cost matrix"),console.log(o(p));for(var v=f.compute(p),d=0,y=0;y<v.length;++y){var g=v[y][0],m=v[y][1],_=p[g][m];d+=_,console.log("("+g+", "+m+") -> "+_)}console.log("lowest cost = "+d+", expected = "+h),s.equal(h,d)}},{assert:6}],5:[function(t,n,r){(function(){function t(t){function n(n,r,e,i,o,u){for(;o>=0&&u>o;o+=t){var a=i?i[o]:o;e=r(e,n[a],a,n)}return e}return function(r,e,i,o){e=w(e,o,4);var u=!A(r)&&b.keys(r),a=(u||r).length,s=t>0?0:a-1;return arguments.length<3&&(i=r[u?u[s]:s],s+=t),n(r,e,i,u,s,a)}}function e(t){return function(n,r,e){r=x(r,e);for(var i=S(n),o=t>0?0:i-1;o>=0&&i>o;o+=t)if(r(n[o],o,n))return o;return-1}}function i(t,n,r){return function(e,i,o){var u=0,a=S(e);if("number"==typeof o)t>0?u=o>=0?o:Math.max(o+a,u):a=o>=0?Math.min(o+1,a):o+a+1;else if(r&&o&&a)return o=r(e,i),e[o]===i?o:-1;if(i!==i)return o=n(p.call(e,u,a),b.isNaN),o>=0?o+u:-1;for(o=t>0?u:a-1;o>=0&&a>o;o+=t)if(e[o]===i)return o;return-1}}function o(t,n){var r=M.length,e=t.constructor,i=b.isFunction(e)&&e.prototype||c,o="constructor";for(b.has(t,o)&&!b.contains(n,o)&&n.push(o);r--;)o=M[r],o in t&&t[o]!==i[o]&&!b.contains(n,o)&&n.push(o)}var u=this,a=u._,s=Array.prototype,c=Object.prototype,f=Function.prototype,l=s.push,p=s.slice,h=c.toString,v=c.hasOwnProperty,d=Array.isArray,y=Object.keys,g=f.bind,m=Object.create,_=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=b),r._=b):u._=b,b.VERSION="1.8.3";var w=function(t,n,r){if(void 0===n)return t;switch(null==r?3:r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)};case 4:return function(r,e,i,o){return t.call(n,r,e,i,o)}}return function(){return t.apply(n,arguments)}},x=function(t,n,r){return null==t?b.identity:b.isFunction(t)?w(t,n,r):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,n){return x(t,n,1/0)};var E=function(t,n){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var i=1;e>i;i++)for(var o=arguments[i],u=t(o),a=u.length,s=0;a>s;s++){var c=u[s];n&&void 0!==r[c]||(r[c]=o[c])}return r}},j=function(t){if(!b.isObject(t))return{};if(m)return m(t);_.prototype=t;var n=new _;return _.prototype=null,n},k=function(t){return function(n){return null==n?void 0:n[t]}},O=Math.pow(2,53)-1,S=k("length"),A=function(t){var n=S(t);return"number"==typeof n&&n>=0&&O>=n};b.each=b.forEach=function(t,n,r){n=w(n,r);var e,i;if(A(t))for(e=0,i=t.length;i>e;e++)n(t[e],e,t);else{var o=b.keys(t);for(e=0,i=o.length;i>e;e++)n(t[o[e]],o[e],t)}return t},b.map=b.collect=function(t,n,r){n=x(n,r);for(var e=!A(t)&&b.keys(t),i=(e||t).length,o=Array(i),u=0;i>u;u++){var a=e?e[u]:u;o[u]=n(t[a],a,t)}return o},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,n,r){var e;return e=A(t)?b.findIndex(t,n,r):b.findKey(t,n,r),void 0!==e&&-1!==e?t[e]:void 0},b.filter=b.select=function(t,n,r){var e=[];return n=x(n,r),b.each(t,function(t,r,i){n(t,r,i)&&e.push(t)}),e},b.reject=function(t,n,r){return b.filter(t,b.negate(x(n)),r)},b.every=b.all=function(t,n,r){n=x(n,r);for(var e=!A(t)&&b.keys(t),i=(e||t).length,o=0;i>o;o++){var u=e?e[o]:o;if(!n(t[u],u,t))return!1}return!0},b.some=b.any=function(t,n,r){n=x(n,r);for(var e=!A(t)&&b.keys(t),i=(e||t).length,o=0;i>o;o++){var u=e?e[o]:o;if(n(t[u],u,t))return!0}return!1},b.contains=b.includes=b.include=function(t,n,r,e){return A(t)||(t=b.values(t)),("number"!=typeof r||e)&&(r=0),b.indexOf(t,n,r)>=0},b.invoke=function(t,n){var r=p.call(arguments,2),e=b.isFunction(n);return b.map(t,function(t){var i=e?n:t[n];return null==i?i:i.apply(t,r)})},b.pluck=function(t,n){return b.map(t,b.property(n))},b.where=function(t,n){return b.filter(t,b.matcher(n))},b.findWhere=function(t,n){return b.find(t,b.matcher(n))},b.max=function(t,n,r){var e,i,o=-(1/0),u=-(1/0);if(null==n&&null!=t){t=A(t)?t:b.values(t);for(var a=0,s=t.length;s>a;a++)e=t[a],e>o&&(o=e)}else n=x(n,r),b.each(t,function(t,r,e){i=n(t,r,e),(i>u||i===-(1/0)&&o===-(1/0))&&(o=t,u=i)});return o},b.min=function(t,n,r){var e,i,o=1/0,u=1/0;if(null==n&&null!=t){t=A(t)?t:b.values(t);for(var a=0,s=t.length;s>a;a++)e=t[a],o>e&&(o=e)}else n=x(n,r),b.each(t,function(t,r,e){i=n(t,r,e),(u>i||i===1/0&&o===1/0)&&(o=t,u=i)});return o},b.shuffle=function(t){for(var n,r=A(t)?t:b.values(t),e=r.length,i=Array(e),o=0;e>o;o++)n=b.random(0,o),n!==o&&(i[o]=i[n]),i[n]=r[o];return i},b.sample=function(t,n,r){return null==n||r?(A(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,n))},b.sortBy=function(t,n,r){return n=x(n,r),b.pluck(b.map(t,function(t,r,e){return{value:t,index:r,criteria:n(t,r,e)}}).sort(function(t,n){var r=t.criteria,e=n.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return t.index-n.index}),"value")};var N=function(t){return function(n,r,e){var i={};return r=x(r,e),b.each(n,function(e,o){var u=r(e,o,n);t(i,e,u)}),i}};b.groupBy=N(function(t,n,r){b.has(t,r)?t[r].push(n):t[r]=[n]}),b.indexBy=N(function(t,n,r){t[r]=n}),b.countBy=N(function(t,n,r){b.has(t,r)?t[r]++:t[r]=1}),b.toArray=function(t){return t?b.isArray(t)?p.call(t):A(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:A(t)?t.length:b.keys(t).length},b.partition=function(t,n,r){n=x(n,r);var e=[],i=[];return b.each(t,function(t,r,o){(n(t,r,o)?e:i).push(t)}),[e,i]},b.first=b.head=b.take=function(t,n,r){return null!=t?null==n||r?t[0]:b.initial(t,t.length-n):void 0},b.initial=function(t,n,r){return p.call(t,0,Math.max(0,t.length-(null==n||r?1:n)))},b.last=function(t,n,r){return null!=t?null==n||r?t[t.length-1]:b.rest(t,Math.max(0,t.length-n)):void 0},b.rest=b.tail=b.drop=function(t,n,r){return p.call(t,null==n||r?1:n)},b.compact=function(t){return b.filter(t,b.identity)};var B=function(t,n,r,e){for(var i=[],o=0,u=e||0,a=S(t);a>u;u++){var s=t[u];if(A(s)&&(b.isArray(s)||b.isArguments(s))){n||(s=B(s,n,r));var c=0,f=s.length;for(i.length+=f;f>c;)i[o++]=s[c++]}else r||(i[o++]=s)}return i};b.flatten=function(t,n){return B(t,n,!1)},b.without=function(t){return b.difference(t,p.call(arguments,1))},b.uniq=b.unique=function(t,n,r,e){b.isBoolean(n)||(e=r,r=n,n=!1),null!=r&&(r=x(r,e));for(var i=[],o=[],u=0,a=S(t);a>u;u++){var s=t[u],c=r?r(s,u,t):s;n?(u&&o===c||i.push(s),o=c):r?b.contains(o,c)||(o.push(c),i.push(s)):b.contains(i,s)||i.push(s)}return i},b.union=function(){return b.uniq(B(arguments,!0,!0))},b.intersection=function(t){for(var n=[],r=arguments.length,e=0,i=S(t);i>e;e++){var o=t[e];if(!b.contains(n,o)){for(var u=1;r>u&&b.contains(arguments[u],o);u++);u===r&&n.push(o)}}return n},b.difference=function(t){var n=B(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(n,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var n=t&&b.max(t,S).length||0,r=Array(n),e=0;n>e;e++)r[e]=b.pluck(t,e);return r},b.object=function(t,n){for(var r={},e=0,i=S(t);i>e;e++)n?r[t[e]]=n[e]:r[t[e][0]]=t[e][1];return r},b.findIndex=e(1),b.findLastIndex=e(-1),b.sortedIndex=function(t,n,r,e){r=x(r,e,1);for(var i=r(n),o=0,u=S(t);u>o;){var a=Math.floor((o+u)/2);r(t[a])<i?o=a+1:u=a}return o},b.indexOf=i(1,b.findIndex,b.sortedIndex),b.lastIndexOf=i(-1,b.findLastIndex),b.range=function(t,n,r){null==n&&(n=t||0,t=0),r=r||1;for(var e=Math.max(Math.ceil((n-t)/r),0),i=Array(e),o=0;e>o;o++,t+=r)i[o]=t;return i};var C=function(t,n,r,e,i){if(!(e instanceof n))return t.apply(r,i);var o=j(t.prototype),u=t.apply(o,i);return b.isObject(u)?u:o};b.bind=function(t,n){if(g&&t.bind===g)return g.apply(t,p.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var r=p.call(arguments,2),e=function(){return C(t,e,n,this,r.concat(p.call(arguments)))};return e},b.partial=function(t){var n=p.call(arguments,1),r=function(){for(var e=0,i=n.length,o=Array(i),u=0;i>u;u++)o[u]=n[u]===b?arguments[e++]:n[u];for(;e<arguments.length;)o.push(arguments[e++]);return C(t,r,this,this,o)};return r},b.bindAll=function(t){var n,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(n=1;e>n;n++)r=arguments[n],t[r]=b.bind(t[r],t);return t},b.memoize=function(t,n){var r=function(e){var i=r.cache,o=""+(n?n.apply(this,arguments):e);return b.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return r.cache={},r},b.delay=function(t,n){var r=p.call(arguments,2);return setTimeout(function(){return t.apply(null,r)},n)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,n,r){var e,i,o,u=null,a=0;r||(r={});var s=function(){a=r.leading===!1?0:b.now(),u=null,o=t.apply(e,i),u||(e=i=null)};return function(){var c=b.now();a||r.leading!==!1||(a=c);var f=n-(c-a);return e=this,i=arguments,0>=f||f>n?(u&&(clearTimeout(u),u=null),a=c,o=t.apply(e,i),u||(e=i=null)):u||r.trailing===!1||(u=setTimeout(s,f)),o}},b.debounce=function(t,n,r){var e,i,o,u,a,s=function(){var c=b.now()-u;n>c&&c>=0?e=setTimeout(s,n-c):(e=null,r||(a=t.apply(o,i),e||(o=i=null)))};return function(){o=this,i=arguments,u=b.now();var c=r&&!e;return e||(e=setTimeout(s,n)),c&&(a=t.apply(o,i),o=i=null),a}},b.wrap=function(t,n){return b.partial(n,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,n=t.length-1;return function(){for(var r=n,e=t[n].apply(this,arguments);r--;)e=t[r].call(this,e);return e}},b.after=function(t,n){return function(){return--t<1?n.apply(this,arguments):void 0}},b.before=function(t,n){var r;return function(){return--t>0&&(r=n.apply(this,arguments)),1>=t&&(n=null),r}},b.once=b.partial(b.before,2);var F=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(y)return y(t);var n=[];for(var r in t)b.has(t,r)&&n.push(r);return F&&o(t,n),n},b.allKeys=function(t){if(!b.isObject(t))return[];var n=[];for(var r in t)n.push(r);return F&&o(t,n),n},b.values=function(t){for(var n=b.keys(t),r=n.length,e=Array(r),i=0;r>i;i++)e[i]=t[n[i]];return e},b.mapObject=function(t,n,r){n=x(n,r);for(var e,i=b.keys(t),o=i.length,u={},a=0;o>a;a++)e=i[a],u[e]=n(t[e],e,t);return u},b.pairs=function(t){for(var n=b.keys(t),r=n.length,e=Array(r),i=0;r>i;i++)e[i]=[n[i],t[n[i]]];return e},b.invert=function(t){for(var n={},r=b.keys(t),e=0,i=r.length;i>e;e++)n[t[r[e]]]=r[e];return n},b.functions=b.methods=function(t){var n=[];for(var r in t)b.isFunction(t[r])&&n.push(r);return n.sort()},b.extend=E(b.allKeys),b.extendOwn=b.assign=E(b.keys),b.findKey=function(t,n,r){n=x(n,r);for(var e,i=b.keys(t),o=0,u=i.length;u>o;o++)if(e=i[o],n(t[e],e,t))return e},b.pick=function(t,n,r){var e,i,o={},u=t;if(null==u)return o;b.isFunction(n)?(i=b.allKeys(u),e=w(n,r)):(i=B(arguments,!1,!1,1),e=function(t,n,r){return n in r},u=Object(u));for(var a=0,s=i.length;s>a;a++){var c=i[a],f=u[c];e(f,c,u)&&(o[c]=f)}return o},b.omit=function(t,n,r){if(b.isFunction(n))n=b.negate(n);else{var e=b.map(B(arguments,!1,!1,1),String);n=function(t,n){return!b.contains(e,n)}}return b.pick(t,n,r)},b.defaults=E(b.allKeys,!0),b.create=function(t,n){var r=j(t);return n&&b.extendOwn(r,n),r},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,n){return n(t),t},b.isMatch=function(t,n){var r=b.keys(n),e=r.length;if(null==t)return!e;for(var i=Object(t),o=0;e>o;o++){var u=r[o];if(n[u]!==i[u]||!(u in i))return!1}return!0};var I=function(t,n,r,e){if(t===n)return 0!==t||1/t===1/n;if(null==t||null==n)return t===n;t instanceof b&&(t=t._wrapped),n instanceof b&&(n=n._wrapped);var i=h.call(t);if(i!==h.call(n))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!==+t?+n!==+n:0===+t?1/+t===1/n:+t===+n;case"[object Date]":case"[object Boolean]":return+t===+n}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof n)return!1;var u=t.constructor,a=n.constructor;if(u!==a&&!(b.isFunction(u)&&u instanceof u&&b.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in n)return!1}r=r||[],e=e||[];for(var s=r.length;s--;)if(r[s]===t)return e[s]===n;if(r.push(t),e.push(n),o){if(s=t.length,s!==n.length)return!1;for(;s--;)if(!I(t[s],n[s],r,e))return!1}else{var c,f=b.keys(t);if(s=f.length,b.keys(n).length!==s)return!1;for(;s--;)if(c=f[s],!b.has(n,c)||!I(t[c],n[c],r,e))return!1}return r.pop(),e.pop(),!0};b.isEqual=function(t,n){return I(t,n)},b.isEmpty=function(t){return null==t?!0:A(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=d||function(t){return"[object Array]"===h.call(t)},b.isObject=function(t){var n=typeof t;return"function"===n||"object"===n&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(n){return h.call(n)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===h.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,n){return null!=t&&v.call(t,n)},b.noConflict=function(){return u._=a,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=k,b.propertyOf=function(t){return null==t?function(){}:function(n){return t[n]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(n){return b.isMatch(n,t)}},b.times=function(t,n,r){var e=Array(Math.max(0,t));n=w(n,r,1);for(var i=0;t>i;i++)e[i]=n(i);return e},b.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=b.invert(q),D=function(t){var n=function(n){return t[n]},r="(?:"+b.keys(t).join("|")+")",e=RegExp(r),i=RegExp(r,"g");return function(t){return t=null==t?"":""+t,e.test(t)?t.replace(i,n):t}};b.escape=D(q),b.unescape=D(z),b.result=function(t,n,r){var e=null==t?void 0:t[n];return void 0===e&&(e=r),b.isFunction(e)?e.call(t):e};var P=0;b.uniqueId=function(t){var n=++P+"";return t?t+n:n},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(t){return"\\"+R[t]};b.template=function(t,n,r){!n&&r&&(n=r),n=b.defaults({},n,b.templateSettings);var e=RegExp([(n.escape||T).source,(n.interpolate||T).source,(n.evaluate||T).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(e,function(n,r,e,u,a){return o+=t.slice(i,a).replace(U,Z),i=a+n.length,r?o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?o+="'+\n((__t=("+e+"))==null?'':__t)+\n'":u&&(o+="';\n"+u+"\n__p+='"),n}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var u=new Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}var s=function(t){return u.call(this,t,b)},c=n.variable||"obj";return s.source="function("+c+"){\n"+o+"}",s},b.chain=function(t){var n=b(t);return n._chain=!0,n};var J=function(t,n){return t._chain?b(n).chain():n};b.mixin=function(t){b.each(b.functions(t),function(n){var r=b[n]=t[n];b.prototype[n]=function(){var t=[this._wrapped];return l.apply(t,arguments),J(this,r.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=s[t];b.prototype[t]=function(){var r=this._wrapped;return n.apply(r,arguments),"shift"!==t&&"splice"!==t||0!==r.length||delete r[0],J(this,r)}}),b.each(["concat","join","slice"],function(t){var n=s[t];b.prototype[t]=function(){return J(this,n.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}],6:[function(t,n,r){function e(t,n){return h.isUndefined(n)?""+n:!h.isNumber(n)||!isNaN(n)&&isFinite(n)?h.isFunction(n)||h.isRegExp(n)?n.toString():n:n.toString()}function i(t,n){return h.isString(t)?t.length<n?t:t.slice(0,n):t}function o(t){return i(JSON.stringify(t.actual,e),128)+" "+t.operator+" "+i(JSON.stringify(t.expected,e),128)}function u(t,n,r,e,i){throw new y.AssertionError({message:r,actual:t,expected:n,operator:e,stackStartFunction:i})}function a(t,n){t||u(t,!0,n,"==",y.ok)}function s(t,n){if(t===n)return!0;if(h.isBuffer(t)&&h.isBuffer(n)){if(t.length!=n.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}return h.isDate(t)&&h.isDate(n)?t.getTime()===n.getTime():h.isRegExp(t)&&h.isRegExp(n)?t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase:h.isObject(t)||h.isObject(n)?f(t,n):t==n}function c(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function f(t,n){if(h.isNullOrUndefined(t)||h.isNullOrUndefined(n))return!1;if(t.prototype!==n.prototype)return!1;if(c(t))return c(n)?(t=v.call(t),n=v.call(n),s(t,n)):!1;try{var r,e,i=g(t),o=g(n)}catch(u){return!1}if(i.length!=o.length)return!1;for(i.sort(),o.sort(),e=i.length-1;e>=0;e--)if(i[e]!=o[e])return!1;for(e=i.length-1;e>=0;e--)if(r=i[e],!s(t[r],n[r]))return!1;return!0}function l(t,n){return t&&n?"[object RegExp]"==Object.prototype.toString.call(n)?n.test(t):t instanceof n?!0:n.call({},t)===!0:!1}function p(t,n,r,e){var i;h.isString(r)&&(e=r,r=null);try{n()}catch(o){i=o}if(e=(r&&r.name?" ("+r.name+").":".")+(e?" "+e:"."),t&&!i&&u(i,r,"Missing expected exception"+e),!t&&l(i,r)&&u(i,r,"Got unwanted exception"+e),t&&i&&r&&!l(i,r)||!t&&i)throw i}var h=t("util/"),v=Array.prototype.slice,d=Object.prototype.hasOwnProperty,y=n.exports=a;y.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var n=t.stackStartFunction||u;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var e=r.stack,i=n.name,a=e.indexOf("\n"+i);if(a>=0){var s=e.indexOf("\n",a+1);e=e.substring(s+1)}this.stack=e}}},h.inherits(y.AssertionError,Error),y.fail=u,y.ok=a,y.equal=function(t,n,r){t!=n&&u(t,n,r,"==",y.equal)},y.notEqual=function(t,n,r){t==n&&u(t,n,r,"!=",y.notEqual)},y.deepEqual=function(t,n,r){s(t,n)||u(t,n,r,"deepEqual",y.deepEqual)},y.notDeepEqual=function(t,n,r){s(t,n)&&u(t,n,r,"notDeepEqual",y.notDeepEqual)},y.strictEqual=function(t,n,r){t!==n&&u(t,n,r,"===",y.strictEqual)},y.notStrictEqual=function(t,n,r){t===n&&u(t,n,r,"!==",y.notStrictEqual)},y["throws"]=function(t,n,r){p.apply(this,[!0].concat(v.call(arguments)))},y.doesNotThrow=function(t,n){p.apply(this,[!1].concat(v.call(arguments)))},y.ifError=function(t){if(t)throw t};var g=Object.keys||function(t){var n=[];for(var r in t)d.call(t,r)&&n.push(r);return n}},{"util/":10}],7:[function(t,n,r){"function"==typeof Object.create?n.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(t,n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],8:[function(t,n,r){var e=n.exports={};e.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(n){var r=[];return window.addEventListener("message",function(t){var n=t.source;if((n===window||null===n)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var e=r.shift();e()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],9:[function(t,n,r){n.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],10:[function(t,n,r){function e(t,n){var e={seen:[],stylize:o};return arguments.length>=3&&(e.depth=arguments[2]),arguments.length>=4&&(e.colors=arguments[3]),v(n)?e.showHidden=n:n&&r._extend(e,n),b(e.showHidden)&&(e.showHidden=!1),b(e.depth)&&(e.depth=2),b(e.colors)&&(e.colors=!1),b(e.customInspect)&&(e.customInspect=!0),e.colors&&(e.stylize=i),a(e,t,e.depth)}function i(t,n){var r=e.styles[n];return r?"["+e.colors[r][0]+"m"+t+"["+e.colors[r][1]+"m":t}function o(t,n){return t}function u(t){var n={};return t.forEach(function(t,r){n[t]=!0}),n}function a(t,n,e){if(t.customInspect&&n&&k(n.inspect)&&n.inspect!==r.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(e,t);return m(i)||(i=a(t,i,e)),i}var o=s(t,n);if(o)return o;var v=Object.keys(n),d=u(v);if(t.showHidden&&(v=Object.getOwnPropertyNames(n)),j(n)&&(v.indexOf("message")>=0||v.indexOf("description")>=0))return c(n);if(0===v.length){if(k(n)){var y=n.name?": "+n.name:"";return t.stylize("[Function"+y+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return t.stylize(Date.prototype.toString.call(n),"date");if(j(n))return c(n)}var g="",_=!1,b=["{","}"];if(h(n)&&(_=!0,b=["[","]"]),k(n)){var x=n.name?": "+n.name:"";g=" [Function"+x+"]"}if(w(n)&&(g=" "+RegExp.prototype.toString.call(n)),E(n)&&(g=" "+Date.prototype.toUTCString.call(n)),j(n)&&(g=" "+c(n)),0===v.length&&(!_||0==n.length))return b[0]+g+b[1];if(0>e)return w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var O;return O=_?f(t,n,e,d,v):v.map(function(r){return l(t,n,e,d,r,_)}),t.seen.pop(),p(O,g,b)}function s(t,n){if(b(n))return t.stylize("undefined","undefined");if(m(n)){var r="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return g(n)?t.stylize(""+n,"number"):v(n)?t.stylize(""+n,"boolean"):d(n)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,n,r,e,i){for(var o=[],u=0,a=n.length;a>u;++u)B(n,String(u))?o.push(l(t,n,r,e,String(u),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,n,r,e,i,!0))}),o}function l(t,n,r,e,i,o){var u,s,c;if(c=Object.getOwnPropertyDescriptor(n,i)||{value:n[i]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),B(e,i)||(u="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=d(r)?a(t,c.value,null):a(t,c.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t;
}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),b(u)){if(o&&i.match(/^\d+$/))return s;u=JSON.stringify(""+i),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+s}function p(t,n,r){var e=0,i=t.reduce(function(t,n){return e++,n.indexOf("\n")>=0&&e++,t+n.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+n+" "+t.join(", ")+" "+r[1]}function h(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function d(t){return null===t}function y(t){return null==t}function g(t){return"number"==typeof t}function m(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function b(t){return void 0===t}function w(t){return x(t)&&"[object RegExp]"===S(t)}function x(t){return"object"==typeof t&&null!==t}function E(t){return x(t)&&"[object Date]"===S(t)}function j(t){return x(t)&&("[object Error]"===S(t)||t instanceof Error)}function k(t){return"function"==typeof t}function O(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function S(t){return Object.prototype.toString.call(t)}function A(t){return 10>t?"0"+t.toString(10):t.toString(10)}function N(){var t=new Date,n=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),z[t.getMonth()],n].join(" ")}function B(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var C=t("__browserify_process"),F="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},M=/%[sdj%]/g;r.format=function(t){if(!m(t)){for(var n=[],r=0;r<arguments.length;r++)n.push(e(arguments[r]));return n.join(" ")}for(var r=1,i=arguments,o=i.length,u=String(t).replace(M,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(n){return"[Circular]"}default:return t}}),a=i[r];o>r;a=i[++r])u+=d(a)||!x(a)?" "+a:" "+e(a);return u},r.deprecate=function(t,n){function e(){if(!i){if(C.throwDeprecation)throw new Error(n);C.traceDeprecation?console.trace(n):console.error(n),i=!0}return t.apply(this,arguments)}if(b(F.process))return function(){return r.deprecate(t,n).apply(this,arguments)};if(C.noDeprecation===!0)return t;var i=!1;return e};var I,q={};r.debuglog=function(t){if(b(I)&&(I=C.env.NODE_DEBUG||""),t=t.toUpperCase(),!q[t])if(new RegExp("\\b"+t+"\\b","i").test(I)){var n=C.pid;q[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else q[t]=function(){};return q[t]},r.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=h,r.isBoolean=v,r.isNull=d,r.isNullOrUndefined=y,r.isNumber=g,r.isString=m,r.isSymbol=_,r.isUndefined=b,r.isRegExp=w,r.isObject=x,r.isDate=E,r.isError=j,r.isFunction=k,r.isPrimitive=O,r.isBuffer=t("./support/isBuffer");var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",N(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,n){if(!n||!x(n))return t;for(var r=Object.keys(n),e=r.length;e--;)t[r[e]]=n[r[e]];return t}},{"./support/isBuffer":9,__browserify_process:8,inherits:7}]},{},[2]);